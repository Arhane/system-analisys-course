# Нулевая домашка
## [Ссылка на диаграмму](https://www.icloud.com/freeform/0320sUF_oqaSwz4dFMh-YG64Q)
## Описание
Микросервисная архитектура, которая будет включать в себя 5 сервисов:
- Сервис для работы с клиентами
- Сервис для работы с воркерами
- Сервис для работы с задачами/заказами
- Сервис для работы с оплатой (Не уверен, что нужен отдельный сервис, но оплата — сложная тема)
- Сервис для работы с менеджерами
- Сервис проверок качества
- Сервис ставок (Не уверен, что нужен отдельный сервис, но эти требования очень сильно отличаются от остальных)

Каждый сервис будет отвечать за свою часть работы, потому что каждая часть работы в будущем будет меняться независимо.
Основным сервисом будет сервис работы с задачами. Он будет отвечать за состояние заказа и отправку событий в другие организации (например заказ печенек) и нотификации при обновлении статуса заказа, а также он будет брать данные из других сервисов (например, данные о клиенте или воркере).

## Сущности
### Заказ
Заказ — это сущность, которая будет хранить в себе информацию о заказе, а также о статусе заказа.
### Клиент
Клиент — это сущность, которая будет хранить в себе информацию о клиенте, например телефон или адрес
Клиент может обновлять заказ
### Воркер
Воркер — это сущность, которая будет хранить в себе информацию о воркере, например сильные и слабые стороны
Воркер может обновлять заказ
### Менеджер
Менеджер — это сущность, которая будет хранить в себе информацию о менеджере, например может ли он делать ставки или нет (здесь не уверен, потому что ставки — часть другого сервиса)

## События
### Клиент зарегистрировался
Событие, которое будет отправляться в сервис работы с клиентами, чтобы добавить клиента
### Воркер зарегистрировался
Событие, которое будет отправляться в сервис работы с воркерами, чтобы добавить воркера
### Заказ создан
Событие, которое будет отправляться в сервис работы с задачами, чтобы создать заказ
### Заказ обновлен
Событие, которое будет отправляться в сервис работы с задачами, чтобы обновить заказ

## Как будет выглядеть стандартный заказ
1. Клиент регистрируется (этого не было в требованиях, но думаю, что это необходимо) или у нас уже есть информация о нем
2. Клиент выбирает услугу, видит примерную стоимость и выбирает дату (Заказ создается)
3. Начинается поиск воркера (к заказу привязывается воркер)
4. Расчет стоимости заказа
5. Воркер получается расходники (сервис по работе с заказами шлет событие в стороннюю организацию)
6. Воркер приезжает и подтверждает начало работы (Заказ обновляется)
7. Воркер заканчивает работу и подтверждает конец работы (Заказ обновляется)
8. Клиент подтверждает конец работы (Заказ обновляется) (Этого не было в требованиях, но думаю, что стоит добавить)
9. В конце недели клиент получает счет (Сервис по работе с заказами шлет событие в сервис по работе с оплатой)
10. Клиент оплачивает счет (Сервис по работе с оплатой шлет событие в сервис по работе с заказами)
11. Воркер получает деньги (Сервис по работе с заказами шлет событие в сервис по работе с воркерами)
